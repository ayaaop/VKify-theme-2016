{extends "../@layout.xml"}
{var $instance_name = OPENVK_ROOT_CONF['openvk']['appearance']['name']}
{block title}{include title} - {_admin} {$instance_name}{/block}

{block wrap}
<style>
    .page_table_wrapper table {
        width: 100%;
        overflow-x: auto;
    }
    .page_table td, .page_table th {
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        max-width: 500px;
    }
    .page_table .avatar {
        margin-right: 5px;
        display: inline-block
    }
    .page_table .avatar img {
        width: 35px;
        height: 35px;
        border-radius: 50%;
    }
    body {
        --layout-width: 80vw;
    }
    .page_body {
        float: right
    }
    .admin-tab-content {
        display: block;
    }
    .admin-tab-content[style*="display: none"] {
        display: none !important;
    }
</style>
{var $menuItems = [
    [
        'isHeader' => true,
        'title' => 'admin_overview'
    ],
    [
        'url' => '/admin',
        'title' => 'admin_overview_summary',
        'active' => $_SERVER['REQUEST_URI'] === '/admin',
    ],
    [
        'isSeparator' => true
    ],
    [
        'isHeader' => true,
        'title' => 'admin_content'
    ],
    [
        'url' => '/admin/users',
        'title' => 'users',
        'active' => strpos($_SERVER['REQUEST_URI'], '/admin/users') === 0,
    ],
    [
        'url' => '/admin/clubs',
        'title' => 'groups',
        'active' => strpos($_SERVER['REQUEST_URI'], '/admin/clubs') === 0,
    ],
    [
        'url' => '/admin/bannedLinks',
        'title' => 'admin_banned_links',
        'active' => strpos($_SERVER['REQUEST_URI'], '/admin/bannedLinks') === 0,
    ],
    [
        'url' => '/admin/music',
        'title' => 'admin_music',
        'active' => strpos($_SERVER['REQUEST_URI'], '/admin/music') === 0,
    ],
    [
        'isSeparator' => true
    ],
    [
        'isHeader' => true,
        'title' => 'Chandler',
        'translate' => false
    ],
    [
        'url' => '/admin/chandler/groups',
        'title' => 'c_groups',
        'active' => strpos($_SERVER['REQUEST_URI'], '/admin/chandler/groups') === 0,
    ],
    [
        'isSeparator' => true
    ],
    [
        'isHeader' => true,
        'title' => 'admin_services'
    ],
    [
        'url' => '/admin/vouchers',
        'title' => 'vouchers',
        'active' => strpos($_SERVER['REQUEST_URI'], '/admin/vouchers') === 0,
    ],
    [
        'url' => '/admin/gifts',
        'title' => 'gifts',
        'active' => strpos($_SERVER['REQUEST_URI'], '/admin/gifts') === 0
    ],
    [
        'isSeparator' => true
    ],
    [
        'isHeader' => true,
        'title' => 'admin_settings'
    ],
    [
        'url' => '/admin/logs',
        'title' => 'logs',
        'active' => strpos($_SERVER['REQUEST_URI'], '/admin/logs') === 0,
    ],
    [
        'isSeparator' => true
    ],
    [
        'isHeader' => true,
        'title' => 'admin_about'
    ],
    [
        'url' => '/about:openvk',
        'title' => 'admin_about_version',
        'active' => strpos($_SERVER['REQUEST_URI'], '/about:openvk') === 0,
    ],
    [
        'url' => '/about',
        'title' => 'admin_about_instance',
        'active' => strpos($_SERVER['REQUEST_URI'], '/about') === 0 && strpos($_SERVER['REQUEST_URI'], '/about:openvk') !== 0,
    ]
]}
    <div class="wide_column_left">
        <div class="narrow_column_wrap">
            <div class="narrow_column">
                {include "../components/ui_rmenu.xml", items => $menuItems}
            </div>
        </div>
        <div class="wide_column_wrap">
            <div class="wide_column">
                {ifset preHeader}
                    {include preHeader}
                {/ifset}
                <div class="page_block_h2">
                    <div class="page_block_header clear_fix">
                        <div class="page_block_header_inner">
                            {ifset headingWrap}
                                {include headingWrap}
                            {else}
                                {include heading}
                            {/ifset}
                        </div>
                    </div>
                </div>
                {ifset afterHeader}
                    {include afterHeader}
                {/ifset}
                <div class="page_block">

                    {ifset $flashMessage}
                        {var $type = ["err" => "error", "warn" => "warning", "info" => "info", "succ" => "success"][$flashMessage->type]}
                        <div class="page_block_header_status page_block_header_status_{$type}" style="margin-bottom: 15px;">
                            <strong>{$flashMessage->title}</strong>
                            <div>{$flashMessage->msg|noescape}</div>
                        </div>
                    {/ifset}

                    {include content}
                </div>
            </div>
        </div>
    </div>
    {ifset scripts}
        {include scripts}
    {/ifset}
{/block}
