{extends "@layout.xml"}

{block title}
    {_admin_banned_links}
{/block}

{block heading}
    <a style="float: right;" class="button" href="/admin/bannedLink/id0">
        {_create}
    </a>

    {_admin_banned_links}
{/block}

{block content}
    <div class="page_padding">
        <div class="page_table_wrapper">
            <table class="page_table">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>{_admin_banned_domain}</th>
                        <th>REGEXP</th>
                        <th>{_admin_banned_link_reason}</th>
                        <th>{_admin_banned_link_initiator}</th>
                        <th>{_admin_actions}</th>
                    </tr>
                </thead>
                <tbody>
                    <tr n:foreach="$links as $link">
                        <td>{$link->getId()}</td>
                        <td>{$link->getDomain()}</td>
                        <td>{$link->getRegexpRule()}</td>
                        <td>{$link->getReason() ?? "-"}</td>
                        <td>{$link->getInitiator()->getCanonicalName()}</td>
                        <td>
                            <a class="button" href="/admin/bannedLink/id{$link->getId()}">
                                {_edit}
                            </a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        {if isset($count) && $count > 0}
            {include "paginator.xml", conf => [
                'page' => $_GET['p'] ?? 1,
                'count' => $count,
                'perPage' => 20,
                'atBottom' => true
            ]}
        {/if}
    </div>
{/block}