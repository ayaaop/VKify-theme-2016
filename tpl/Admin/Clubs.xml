{extends "@layout.xml"}
{var $search = true}

{block title}
    {_admin_club_search}
{/block}

{block heading}
    {_groups}
{/block}

{block searchTitle}
    {include title}
{/block}

{block content}
    {var $clubs  = iterator_to_array($clubs)}
    {var $amount = sizeof($clubs)}
    
    <div class="page_padding">
        <div class="page_table_wrapper">
            <table class="page_table">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>{_admin_title}</th>
                        <th>{_admin_author}</th>
                        <th>{_admin_description}</th>
                        <th>{_admin_shortcode}</th>
                        <th>{_admin_actions}</th>
                    </tr>
                </thead>
                <tbody>
                    <tr n:foreach="$clubs as $club">
                        <td>{$club->getId()}</td>
                        <td>
                            <span class="avatar">
                                <img src="{$club->getAvatarUrl('miniscule')}" alt="{$club->getCanonicalName()}" style="object-fit: cover;" role="presentation" />
                            </span>

                            <a href="{$club->getURL()}">{$club->getCanonicalName()}</a>
                        </td>
                        <td>
                            {var $user = $club->getOwner()}

                            <span class="avatar">
                                <img src="{$user->getAvatarUrl('miniscule')}" alt="{$user->getCanonicalName()}" role="presentation" />
                            </span>

                            <a href="{$user->getURL()}">{$user->getCanonicalName()}</a>
                        </td>
                        <td>{$club->getDescription() ?? "(" . tr("none") . ")"}</td>
                        <td>{$club->getShortCode()}</td>
                        <td>
                            <a class="button" href="/admin/clubs/id{$club->getId()}">
                                {_edit}
                            </a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        {if isset($count) && $count > 0}
            {include "../components/paginator.xml", conf => [
                'page' => $_GET['p'] ?? 1,
                'count' => $count,
                'perPage' => 10,
                'atBottom' => true
            ]}
        {/if}
    </div>
{/block}
