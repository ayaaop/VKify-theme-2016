{extends "@layout.xml"}

{block title}
    {_edit} {$audio->getName()}
{/block}

{block heading}
    {$audio->getName()}
{/block}

{block content}
    <form method="POST">
        <div class="settings_panel clear_fix group_settings settings_padding">
            <div class="settings_list_row">
                <div class="settings_label">ID</div>
                <div class="settings_labeled_text" dir="auto">{$audio->getId()}</div>
            </div>
            <div class="settings_list_row">
                <div class="settings_label">{_created}</div>
                <div class="settings_labeled_text" dir="auto">{$audio->getPublicationTime()}</div>
            </div>
            <div class="settings_list_row">
                <div class="settings_label">{_edited}</div>
                <div class="settings_labeled_text" dir="auto">{$audio->getEditTime() ?? "never"}</div>
            </div>
            <div class="settings_list_row">
                <div class="settings_label">{_name}</div>
                <div class="settings_labeled_text">
                    <input class="text medium-field" type="text" id="name" name="name" value="{$audio->getTitle()}" />
                </div>
            </div>
            <div class="settings_list_row">
                <div class="settings_label">{_performer}</div>
                <div class="settings_labeled_text">
                    <input class="text medium-field" type="text" id="performer" name="performer" value="{$audio->getPerformer()}" />
                </div>
            </div>
            <div class="settings_list_row">
                <div class="settings_label">{_lyrics}</div>
                <div class="settings_labeled_text">
                    <textarea class="text medium-field" id="text" name="text" style="resize: vertical;">{$audio->getLyrics()}</textarea>
                </div>
            </div>
            <div class="settings_list_row">
                <div class="settings_label">{_admin_audio_length}</div>
                <div class="settings_labeled_text" dir="auto">{$audio->getFormattedLength()}</div>
            </div>
            <div class="settings_list_row">
                <div class="settings_label">{_genre}</div>
                <div class="settings_labeled_text">
                    <select class="select medium-field" name="genre">
                        <option n:foreach='\openvk\Web\Models\Entities\Audio::genres as $genre'
                                n:attr="selected: $genre == $audio->getGenre()" value="{$genre}">
                            {$genre}
                        </option>
                    </select>
                </div>
            </div>
            <div class="settings_list_row">
                <div class="settings_label">{_admin_original_file}</div>
                <div class="settings_labeled_text">
                    <audio controls src="{$audio->getOriginalURL(true)}">
                </div>
            </div>
            <div class="settings_line"></div>
            <div class="settings_list_row">
                <div class="settings_label">{_owner}</div>
                <div class="settings_labeled_text">
                    <input class="text medium-field" type="number" id="owner_id" name="owner" value="{$owner}" />
                </div>
            </div>
            <div class="settings_list_row">
                <div class="settings_label">Explicit</div>
                <div class="settings_labeled_text">
                    <label><input class="toggle-large" type="checkbox" id="explicit" name="explicit" value="1" {if $audio->isExplicit()} checked {/if} /> Explicit content</label>
                </div>
            </div>
            <div class="settings_list_row">
                <div class="settings_label">{_deleted}</div>
                <div class="settings_labeled_text">
                    <label><input class="toggle-large" type="checkbox" id="deleted" name="deleted" value="1" {if $audio->isDeleted()} checked {/if} /> {_deleted}</label>
                </div>
            </div>
            <div class="settings_list_row">
                <div class="settings_label">{_withdrawn}</div>
                <div class="settings_labeled_text">
                    <label><input class="toggle-large" type="checkbox" id="withdrawn" name="withdrawn" value="1" {if $audio->isWithdrawn()} checked {/if} /> {_withdrawn}</label>
                </div>
            </div>
            <div class="settings_line"></div>
            <div class="settings_list_row">
                <div class="settings_label"></div>
                <div class="settings_labeled_text">
                    <input type="hidden" name="hash" value="{$csrfToken}" />
                    <input class="button" type="submit" value="{_save}">
                </div>
            </div>
        </div>
    </form>
{/block}
