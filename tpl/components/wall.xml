<div class="content_divider">
	<a href="/wall{$owner}">
		<div class="content_title_expanded">
			{tr("wall", $count)}
		</div>
	</a>
    <div>
    <div class="insertThere" id="postz"></div>
    <div id="underHeader">
        <div n:if="$canPost" class="content_subtitle">
            {include "../components/textArea.xml", route => "/wall$owner/makePost", graffiti => true, polls => true, notes => true, hasSource => true, geo => true, docs => true}
        </div>
        
        <div class="content scroll_container">
            {if sizeof($posts) > 0}
                {foreach $posts as $post}
                    {include "../components/post.xml", post => $post, commentSection => true}
                {/foreach}
                {include "../components/paginator.xml", conf => $paginatorConf}
            <script n:if="$thisUser->getId() != $post->getOwner()->getId() ?? false">
                function reportPost(postId) {
                    uReportMsgTxt  = tr("going_to_report_post");
                    uReportMsgTxt += "<br/>"+tr("report_question_text");
                    uReportMsgTxt += "<br/><br/><b>"+tr("report_reason")+"</b>: <input type='text' id='uReportMsgInput' placeholder='" + tr("reason") + "' />"

                    MessageBox(tr("report_question"), uReportMsgTxt, [tr("confirm_m"), tr("cancel")], [
                        (function() {
                            res = document.querySelector("#uReportMsgInput").value;
                            xhr = new XMLHttpRequest();
                            xhr.open("GET", "/report/" + postId + "?reason=" + res + "&type=post", true);
                            xhr.onload = (function() {
                                if(xhr.responseText.indexOf("reason") === -1)
                                    MessageBox(tr("error"), tr("error_sending_report"), ["OK"], [Function.noop]);
                                else
                                    MessageBox(tr("action_successfully"), tr("will_be_watched"), ["OK"], [Function.noop]);
                            });
                            xhr.send(null);
                        }),
                        Function.noop
                    ]);
                }
            </script>
            {else}
				<div class="page_block module_body" style="border-top: 0px;">
					{_no_posts_abstract}
				</div>
            {/if}
        </div>
    </div>
    </div>
</div>
